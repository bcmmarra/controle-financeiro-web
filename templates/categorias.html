{% extends 'base.html' %}

{% block conteudo %}
<div class="form-container-medium">
    <h2 class="page-title">Gerenciar Categorias</h2>

    {% if erro %}
        <div class="alert alert-erro">
            <i class="fas fa-exclamation-circle"></i> {{ erro }}
        </div>
    {% endif %}

    <div class="card card-action-bar">
        <form action="/salvar_categoria" method="post" class="form-inline">
            <input type="text" name="nome_categoria" placeholder="Nova Categoria (ex: Lazer, Saúde)" required class="form-control">
            <button type="submit" class="btn-confirmar btn-blue">
                <i class="fas fa-plus"></i> Adicionar
            </button>
        </form>
    </div>

    <div class="tabela-wrapper">
        <table class="tabela-extrato">
            <thead>
                <tr>
                    <th>Nome da Categoria</th>
                    <th class="text-center">Ações</th>
                </tr>
            </thead>
            <tbody>
                {% for cat in categorias %}
                <tr>
                    <td><strong>{{ cat.nome }}</strong></td>
                    <td class="acoes-celula text-center">
                        <div class="flex-center gap-10">
                            <a href="/editar_categoria/{{ cat.id }}" class="btn-small btn-edit-bg" title="Editar">
                                <i class="fas fa-edit"></i> Editar
                            </a>
                            
                            <form action="/excluir_categoria/{{ cat.id }}" method="post" 
                                  onsubmit="return confirm('Tem certeza que deseja excluir? Se houver transações vinculadas, a exclusão será bloqueada.')" 
                                  class="form-inline">
                                <button type="submit" class="btn-small btn-delete-bg">
                                    <i class="fas fa-trash"></i> Excluir
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="2" class="tabela-vazia">Nenhuma categoria cadastrada.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}