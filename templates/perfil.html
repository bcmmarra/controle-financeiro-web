{% extends 'base.html' %} 

{% block conteudo %}
<div class="form-container-small">
    <h2 class="page-title">Meu Perfil</h2>

    {% if mensagem %}
    <div class="alert alert-sucesso">
        {{ mensagem }}
    </div>
    {% endif %}

    <div class="card card-formulario">
        <p class="form-instruction">Altere as suas informações de conta abaixo:</p>

        <form method="post">
            <div class="form-group">
                <label>Nome:</label>
                <input type="text" name="nome" value="{{ usuario.nome }}" class="form-control" required />
            </div>

            <div class="form-group">
                <label>E-mail:</label>
                <input type="email" name="email" value="{{ usuario.email }}" class="form-control" required />
            </div>

            <div class="form-group">
                <label>Senha Atual:</label>
                <input type="password" name="senha_atual" class="form-control" placeholder="Confirme sua senha atual" required />
            </div>

            <div class="form-group">
                <label>Nova Senha (Opcional):</label>
                <input type="password" name="nova_senha" class="form-control" placeholder="Deixe em branco para manter a atual" />
                <small class="form-help">Preencha apenas se desejar alterar sua senha.</small>
            </div>

            <button type="submit" class="btn-confirmar btn-blue">
                Salvar Alterações
            </button>
        </form>
    </div>

    <div class="danger-zone">
        <h4 class="danger-title"><i class="fas fa-exclamation-triangle"></i> Zona de Perigo</h4>
        <p class="danger-text">Esta ação é irreversível. Todos os seus dados, lançamentos e categorias serão apagados permanentemente.</p>
        
        <form action="{{ url_for('excluir_conta') }}" method="post" onsubmit="return confirm('ATENÇÃO: Você perderá todos os seus dados. Confirmar exclusão definitiva?')">
            <button type="submit" class="btn-danger">
                Excluir Minha Conta Permanentemente
            </button>
        </form>
    </div>
</div>
{% endblock %}