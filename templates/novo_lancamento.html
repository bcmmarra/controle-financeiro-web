{% extends 'base.html' %}

{% block conteudo %}
<div style="max-width: 500px; margin: 0 auto;">
    <h2 style="color: #2c3e50;">Novo Lançamento</h2>

    <div class="card" style="background: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <form action="/salvar" method="post">
            <div class="campo" style="margin-bottom: 15px;">
                <label>Categoria:</label>
                <select name="categoria_id" required style="width: 100%; padding: 10px;">
                    <option value="">Selecione uma categoria...</option>
                    {% for cat in categorias %}
                    <option value="{{ cat.id }}">{{ cat.nome }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="campo" style="margin-bottom: 15px;">
                <label>Descrição:</label>
                <input type="text" name="descricao" placeholder="Ex: Aluguel, Supermercado..." required style="width: 100%; padding: 10px;" />
            </div>

            <div class="campo" style="margin-bottom: 15px;">
                <label>Valor Total:</label>
                <input type="number" step="0.01" name="valor_total" required style="width: 100%; padding: 10px;">
            </div>

            <div class="campo" style="margin-bottom: 15px;">
                <label>Data:</label>
                <input type="date" name="data_transacao" required style="width: 100%; padding: 10px;" />
            </div>

            <div class="campo" style="margin-bottom: 15px;">
                <label>Método de Pagamento:</label>
                <select name="metodo" id="metodo" onchange="verificarParcelas()" style="width: 100%; padding: 10px;">
                    <option value="Dinheiro">Dinheiro</option>
                    <option value="Pix">Pix</option>
                    <option value="Cartão de Crédito">Cartão de Crédito</option>
                    <option value="Cartão de Débito">Cartão de Débito</option>
                </select>
            </div>

            <div id="campos_parcelas" style="display: none; margin-bottom: 15px; background: #f8f9fa; padding: 15px; border-radius: 5px;">
                <label>Quantidade de Parcelas:</label>
                <input type="number" name="numero_parcelas" value="1" min="1" style="width: 100%; padding: 10px;" />
            </div>

            <div class="campo" style="margin-top: 15px; display: flex; align-items: center; gap: 10px;">
                <input type="checkbox" name="pago" id="pago" style="width: auto;">
                <label for="pago" style="margin: 0;">Esta conta já foi paga?</label>
            </div>

            <button type="submit" style="width: 100%; padding: 12px; background: #27ae60; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px;">Confirmar Lançamento</button>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    function verificarParcelas() {
        var metodo = document.getElementById("metodo").value;
        var div = document.getElementById("campos_parcelas");
        div.style.display = metodo === "Cartão de Crédito" ? "block" : "none";
    }
</script>
{% endblock %}